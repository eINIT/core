.\" This manpage has been automatically generated by docbook2man 
.\" from a DocBook document.  This tool can be found at:
.\" <http://shell.ipoline.com/~elmert/comp/docbook2X/> 
.\" Please send any bug reports, improvements, comments, patches, 
.\" etc. to Steve Cheng <steve@ggi-project.org>.
.TH "EINIT" "8" "24 February 2008" "einit-0.40.0" ""

.SH NAME
einit \- service initialisation and computer boot management
.SH SYNOPSIS

\fBeinit\fR [ \fB [ -h | --help ]\fR ] [ \fB [ -v | --version ]\fR ] [ \fB [ -L | --licence ]\fR ] [ \fB [ -e | -d ] \fIservice\fB\fR ] [ \fB-c \fIservice\fB \fIcommand\fB\fR ] [ \fB [ -em | -dm ] \fImodule\fB\fR ] [ \fB-cm \fImodule\fB \fIcommand\fB\fR ] [ \fB [ -H | -D ]\fR ] [ \fB-R\fR ] [ \fB-m \fImode\fB\fR ] [ \fB-u\fR ] [ \fB [ -ls | ls ] \fIpath\fB\fR ] [ \fB [ -read | read ] \fIpath\fB\fR ] [ \fB [ -write | write ] \fIpath\fB \fIdata\fB\fR ] [ \fB--wtf\fR ] [ \fB [ -q | -p ]\fR ] [ \fB-a \fIaddress\fB\fR ] [ \fB--sandbox\fR ]

.SH "DESCRIPTION"
.PP
\fBeinit\fR is a replacement for the sysv-style /sbin/init programme. Just
like \fBinit\fR, it is (usually) the first programme to be run by the kernel
and responsible for initialising all soft- and hardware.
.SH "OPTIONS"
.TP
\fB--wtf\fR
Start einit, initialise all modules and ask them to check for inconsistencies in your current
configuration, then exit. It is recommended you do this checkup after each and every modification
to your configuration files.
.TP
\fB-e \fIservice\fB\fR
Tell eINIT to enable \fIservice\fR\&.
.TP
\fB-d \fIservice\fB\fR
Tell eINIT to disable \fIservice\fR\&.
.TP
\fB-c \fIservice\fB \fIcommand\fB\fR
Tell eINIT's \fIservice\fR to execute \fIcommand\fR\&. Examples of such commands are "enable" and "disable".
.TP
\fB-em \fImodule\fB\fR
Tell eINIT to enable \fImodule\fR\&. All dependencies of \fImodule\fR need to be met before running this, else the request is discarded.
.TP
\fB-dm \fImodule\fB\fR
Tell eINIT to disable \fImodule\fR\&. \fImodule\fR may not be in use before this command is run, else the request is discarded.
.TP
\fB-cm \fImodule\fB \fIcommand\fB\fR
Tell eINIT's \fImodule\fR to execute \fIcommand\fR\&. Examples of such commands are "enable" and "disable".
.TP
\fB-ls \fIpath\fB\fR
.TP
\fBls \fIpath\fB\fR
Do the equivalent of an 'ls' command on the specified \fIpath\fR\&. \fIpath\fR refers to eINIT's virtual file system, see below for more information on this.
.TP
\fB-read \fIpath\fB\fR
.TP
\fBread \fIpath\fB\fR
Read the contents of the specified \fIpath\fR\&. \fIpath\fR refers to eINIT's virtual file system, see below for more information on this.
.TP
\fB-write \fIpath\fB \fIdata\fB\fR
.TP
\fBwrite \fIpath\fB \fIdata\fB\fR
Write \fIdata\fR to the \fIpath\fR\&. \fIpath\fR refers to eINIT's virtual file system, see below for more information on this.
.TP
\fB-v\fR
.TP
\fB--version\fR
Display version, then exit.
.TP
\fB-L\fR
.TP
\fB--licence\fR
Display version and licence and exit.
.TP
\fB-h\fR
.TP
\fB--help\fR
Display help screen and exit.
.TP
\fB--sandbox\fR
Run einit in sandbox mode: tells modules not to do certain things that could mess up the current
init. This is mainly used for debugging and developing.
.TP
\fB-a \fIaddress\fB\fR
The 9P2000 address to connect to. The default is \fBunix!/dev/einit-9p\fR\&.
.SH "ENVIRONMENT"
.PP
There are some environment variables that may be used to influence einit's behaviour.
.sp
.RS
.B "Note:"
The kernel will set key=value pairs on the kernel command line as environment variables.
.RE
.TP
\fBeinit=\fIoptions\fB\fR
A comma-separated list of special option strings. These strings are colon-separated lists of atoms,
the first atom specifying what the list is about and the rest being variables. Valid strings are
"file:\fIfilename\fR[:\fIfilename\fR[...]]", which can
be used to make einit parse different configuration files than the default einit.xml, and
"mode:\fImode\fR[:\fImode\fR[...]]", which is used
to make einit switch to different modes than "default". If you specify more than parameter atom, then
these are processed in sequence. Only specified option strings change the default behaviour.

Omitting this variable is equivalent to specifying
\fBeinit=file:/lib/einit/einit.xml,mode:default\fR
.TP
\fBsoftmode=\fImode\fB\fR
Will make einit switch to the specified mode instead of "default". Provided for Gentoo compatibility.
.SH "USAGE"
.PP
This programme is actually more of a programme launcher, which will either spawn an eINIT core to boot the
system, or to socialise a bit with it, or it will spawn a helper programme to control an aforementioned
core. \fBeinit\fR decides which of these actions to take by examining its 'pid'. If it is 1,
it will initiate the system bootup sequence, otherwise it will spawn the helper application to allow
controlling eINIT.
.SH "VIRTUAL FILESYSTEM"
.PP
As of late, eINIT uses a 9p2000(.u) filesystem for IPC purposes. This system has replaced the old, rusty
IPC mechanism via a special socket and string commands. 9P2000 is a network filesystem protocol introduced
by Plan 9. In Plan 9, \fBeverything\fR is a file, including things like network links,
processes, CPUs, etc. This is also used for IPC purposes, and since we thought this to be a fairly good
idea, we chose to do this too.
.sp
.RS
.B "Note:"
.PP
It is actually possible to mount this virtual Filesystem in Linux, which makes navigating around
eINIT's internals just that much easier. To do so, you must first make sure that you have 9p2000 support
either compiled into your kernel, or that you have compiled it as a module. Then either run a command like
\fBmount -t 9p /dev/einit-9p /mnt -o proto=unix\fR, or adjust your fstab file accordingly.
.PP
Also note that the proto= option for this filesystem has been changed to trans= in Linux kernel versions
2.6.24 and above.
.RE
.PP
A few important files that you might want to have a closer look at:
.TP
\fB/mode\fR
The mode einit is currently in.
.TP
\fB/services/all/*\fR
All available services as directories.
.TP
\fB/services/provided/*\fR
All services that are currently provided, also as directories.
.TP
\fB/services/*/*/status\fR
Used to retrieve the status of a service.
.TP
\fB/services/*/*/(modules|providers|users)\fR
Directories that contain links to the modules related to a given service. The modules in the
'modules' directory are all the modules that provide the service, 'providers' has all the modules
that currently provide this service, and 'users' contains all the modules that currently use
this module.
.TP
\fB/modules/all/*\fR
All available modules as directories.
.TP
\fB/modules/enabled/*\fR
All the modules that are currently enabled.
.TP
\fB/modules/*/*/(name|status|provides|requires|after|before|actions|options)\fR
These files contain information on a given module. 'name' contains the human-readable name of a
module, 'status' contains all the status flags of the given module, one per line. 'provides' has
all the service names that is module may provide, 'requires' all the service names that a module
needs, 'after' and 'before' contain order information, 'actions' contains any actions that may
be run on this module and 'options' has some special flags that usually aren't of importance to
users.
.TP
\fB/events/feed\fR
This is a special file that you may 'cat' to get a feed of all the events that are happening in
eINIT. Catting this file will even give you a complete backlog of all the events that were emitted
in the given core. Reading past the last event will block until a new event comes in.
.TP
\fB/events/count\fR
Contains how many events eINIT has already processed.
.TP
\fB/issues\fR
This directory only contains files if there are any issues in the core that should be checked.
Listing this directories' contents will make einit scan for any issues and generate files for each
of the issues it finds.
.SH "FILES"
.TP
\fB/lib/einit/einit.xml\fR
The default configuration file. You should keep it in sync with the one provided with einit when
installing.
.TP
\fB/lib/einit/bootstrap/*\fR
.TP
\fB/lib/einit/modules/*\fR
C modules are stored here. The bootstrap directory is special in that it contains modules that are
needed to properly load the remaining modules.
.TP
\fB/lib/einit/modules-xml/*\fR
XML/sh modules.
.TP
\fB/lib/einit/modules-scheme/*\fR
Scheme modules.
.TP
\fB/lib/einit/bin/*\fR
einit's core and helper binaries are stored here.
.TP
\fB/etc/einit/*\fR
This is where you should do your modifications to einit's configuration.
.TP
\fB/etc/einit/conf.d\fR
Files in this directory control einit services' behaviour.
.TP
\fB/dev/einit-9p\fR
The unix socket that is used by the 9p2000(.u) IPC. You will usually use the address
\fBunix!/dev/einit-9p\fR in most 9p-aware applications.
.SH "BUGS"
.PP
Please send bug reports to the \fBissue tracker on einit.org\fR\&.
.PP
Remember that this is BETA software: avoid using this on mission-critical systems.
.TP 0.2i
\(bu
\fBeinit\fR is pretty picky about the kernel right now: it requires proper pthreads
support (NPTL on Linux) and the default configuration files expect tmpfs and udev support. 
.SH "SEE ALSO"
.PP
einit-feedback(8), einit-log(8), einit-sysvd(8)
.PP
The official project website <URL:http://einit.org/>
.SH "AUTHOR"
.PP
Written by Magnus Deininger <mdeininger@jyujin.de>\&.
.SH "COPYRIGHT"
.PP
(C) 2006-2008 Magnus Deininger, All rights reserved.
.PP
Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:
.PP
.TP 0.2i
\(bu
Redistributions of source code must retain the above copyright notice,
this list of conditions and the following disclaimer.
.TP 0.2i
\(bu
Redistributions in binary form must reproduce the above copyright notice,
this list of conditions and the following disclaimer in the documentation
and/or other materials provided with the distribution.
.TP 0.2i
\(bu
Neither the name of the project nor the names of its contributors may be
used to endorse or promote products derived from this software without
specific prior written permission.
.PP
THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
