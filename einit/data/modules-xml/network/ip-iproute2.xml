<einit prefix="services-virtual-module">
 <shell-template id="template-shell-ip-iproute2"
  name="Using 'ip' to assign a static addresses for interface ${interface}"
  requires="ifctl-${interface}"
  provides="ip-${interface}"
  enable="/sbin/ip addr add ${configuration_network_interfaces_${interface}_address} dev ${interface} ;
   /sbin/ip link set ${interface} up ;
   /sbin/ip route add ${configuration_network_interfaces_${interface}_network} dev ${interface} ;
   if [ ! -z ${configuration_network_interfaces_${interface}_gateway} ]; then
    /sbin/ip route add via ${configuration_network_interfaces_${interface}_gateway};
   fi"
  disable="/sbin/ip link set ${interface} down"
  variables="configuration-network-interfaces-${interface}/.*" />
</einit>
