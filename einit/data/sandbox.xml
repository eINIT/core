<?xml version="1.0" encoding="UTF-8" ?>
<einit>
 <module-path s="lib/einit" />
 <configuration-path s="etc/einit/" />
 <include s="shell.xml" />
 <include s="daemon.xml" />
 <include s="rc.xml" />

 <forge-utmp b="true" i="3" />
 <forge-wtmp b="true" />

 <control-socket s="etc/einit-control" oi="0600" />

 <edje-theme-path s="etc/einit/edje" />
 <edje-theme-default s="einit.edj" />
 <edje-theme-default-component s="einit/splash" />
 <sysconf-ctrl-alt-del b="disabled" />
 <sysv-script-path s="/etc/init.d" />
 <sysv-script-type s="plain" />
 <prefer-feedback s="einit-feedback-visual:einit-efl-feedback-evas" />
 <prefer-feedback-visual s="einit-efl-feedback-evas-edje:einit-feedback-visual" />
 <shell s="/bin/sh -c" />

 <conf_hostname s="localhost" />
 <conf_domainname s="localnet" />
 <conf_keyboardlayout s="de" />
<!-- these modules should be OK for an ASUS K7N8X-E Gold Motherboard -->
 <kernel_module_eth0 s="forcedeth" />
 <kernel_module_eth1 s="skge" />

 <mod-shell id="shell-sysconf" name="sysconf dummy" provides="sysconf" enable="echo sysconf;" disable="echo sysconf;" />

 <mod-shell id="shell-mount-proc-dummy" name="/proc filesystem" provides="/proc" requires="/" enable="echo 'rm /etc/mtab;mount proc /proc -t proc;cp /proc/mounts /etc/mtab';" disable="echo 'umount /proc';" />
 <mod-shell id="shell-mount-sys-dummy" name="/sys filesystem" provides="/sys" enable="echo 'mount sys /sys -t sysfs';" disable="echo 'umount /sys';" />
 <mod-shell id="shell-mount-root-dummy" name="/ filesystem (RW-access)" provides="/" enable="echo 'mount / -o remount,rw; rm -Rf /var/run/*';" disable="echo 'mount / -o remount,ro';" />
 <mod-shell id="shell-mount-dummy" name="local filesystems" provides="localmount" requires="/proc:/:/dev:/sys" enable="echo 'mount -at nonfs,noproc,noshm';" disable="echo 'umount -ar';" />

<!-- udev -->
 <mod-daemon id="daemon-udev" name="udevd for /dev" provides="/dev:udev" requires="/sys" command="/sbin/udevd" prepare="echo '/bin/mount udev -t tmpfs /dev; /sbin/udevstart';" cleanup="echo 'umount /dev';"/>

 <mod-shell id="shell-kern-eth0-dummy" name="net-eth0" provides="kern-eth0" enable="echo /sbin/modprobe ${kernel_module_eth0}" disable="echo /sbin/rmmod ${kernel_module_eth0}" variables="kernel_module_eth0" />
 <mod-shell id="shell-kern-eth1-dummy" name="net-eth0" provides="kern-eth1" enable="echon /sbin/modprobe ${kernel_module_eth1}" disable="echo /sbin/rmmod ${kernel_module_eth1}" variables="kernel_module_eth1"/>

 <mod-shell id="shell-hostname-dummy" name="set hostname" provides="hostname" enable="echo /bin/hostname ${conf_hostname}" disable="" variables="conf_hostname"/>
 <mod-shell id="shell-domainname-dummy" name="set NIS/YP domainname" provides="domainname" enable="echo /bin/domainname ${conf_domainname}" disable="" variables="conf_domainname"/>

<!-- for testing -->
 <mod-shell id="shell-keyboard-dummy" name="keyboard layout" provides="keyboard" requires="localmount" enable="echo /bin/loadkeys ${conf_keyboardlayout}" disable=";" variables="conf_keyboardlayout" />

<!-- daemon-spawn-timeout: integer: if a daemon dies within this many seconds,
  it won't be restarted and will will be thought of as being defunct or
  misconfigured -->
 <daemon-spawn-timeout i="20" />
<!-- you can define daemoni like this -->
 <mod-daemon id="daemon-gpm" name="GPM" provides="gpm" requires="tty" command="/usr/sbin/gpm" restart="yes" />
 <mod-daemon id="daemon-apmd" name="APMD" provides="apmd" requires="localmount" command="/usr/sbin/apmd" restart="yes" />

 <mod-daemon id="daemon-metalog" name="syslogger (metalog)" provides="syslog" requires="localmount" command="/usr/sbin/metalog" restart="yes" />

 <mod-shell id="shell-net-loopback-dummy" name="net-lo" provides="net-lo" enable="echo /sbin/ifconfig lo up" disable="echo ifconfig lo down" />

<!-- tty initialisation -->
 <tty-manage-utmp b="true" />

 <tty1-regular dev="/dev/tty1" command="/sbin/agetty 38400 tty1" restart="no" TERM="linux" />
 <tty2-regular dev="/dev/tty2" command="/sbin/agetty 38400 tty2" restart="no" TERM="linux" />
 <tty3-regular dev="/dev/tty3" command="/sbin/agetty 38400 tty3" restart="no" TERM="linux" />
 <tty4-regular dev="/dev/tty4" command="/sbin/agetty 38400 tty4" restart="no" TERM="linux" />
 <tty5-regular dev="/dev/tty5" command="/sbin/agetty 38400 tty5" restart="no" TERM="linux" />
 <tty6-regular dev="/dev/tty6" command="/sbin/agetty 38400 tty6" restart="no" TERM="linux" />
 <tty10-regular dev="/dev/tty10" command="/sbin/agetty 38400 tty10" restart="no" TERM="linux" />

 <mode id="feedback">
  <enable mod="feedback-visual" />
 </mode>
 <mode id="boot">
<!--  <enable mod="ipc" /> -->
  <enable-ttys s="tty1-regular" />
 </mode>
 <mode id="default" base="boot">
  <enable mod="ipc" />
  <enable-ttys s="tty2-regular:tty3-regular:tty4-regular:tty5-regular:tty6-regular" />
 </mode>
 <mode id="power-off">
  <disable-unspecified b="yes" />
  <enable-ttys s="none" />
 </mode>
 <mode id="power-reset">
  <disable-unspecified b="yes" />
  <enable-ttys s="none" />
 </mode>
</einit>
