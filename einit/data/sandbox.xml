<?xml version="1.0" encoding="UTF-8" ?>
<einit>
 <module-path s="lib/einit" />
 <configuration-path s="etc/einit/" />
 <include s="shell.xml" />
 <include s="daemon.xml" />
 <include s="rc.xml" />
 <include s="filesystems.xml" />

 <forge-utmp b="true" i="3" />
 <forge-wtmp b="true" />

 <control-socket s="etc/einit-control" oi="0600" />

 <tts-synthesizer-command s="echo %s|/usr/bin/festival --tts" />
 <tts-vocalising-threshold i="6" />

 <edje-theme-path s="etc/einit/edje" />
 <edje-theme-default s="einit.edj" />
 <edje-theme-default-component s="einit/splash" />
 <sysconf-ctrl-alt-del b="disabled" />
 <prefer-feedback s="einit-feedback-visual:einit-efl-feedback-evas" />
 <prefer-feedback-visual s="einit-efl-feedback-evas-edje:einit-feedback-visual" />
 <shell s="/bin/sh -c" TZ="CEST" PATH="/bin:/sbin:/usr/bin:/usr/sbin" />

 <use-ansi-codes b="false" />
 <std-io stdin="/dev/tty" stdout="/dev/tty" stderr="einit-stderr" console="/dev/tty12" activate-vt="1" kernel-vt="12" />

 <mount-block-devices-dev-constraints s=".*" />

 <mod-shell id="shell-sysconf" name="sysconf dummy" provides="sysconf" enable="echo sysconf;" disable="echo sysconf;" />

 <mod-shell id="shell-kern-eth0-dummy" name="net-eth0" provides="kern-eth0" enable="echo /sbin/modprobe ${kernel_module_eth0}" disable="echo /sbin/rmmod ${kernel_module_eth0}" variables="kernel_module_eth0" />
 <mod-shell id="shell-kern-eth1-dummy" name="net-eth0" provides="kern-eth1" enable="echon /sbin/modprobe ${kernel_module_eth1}" disable="echo /sbin/rmmod ${kernel_module_eth1}" variables="kernel_module_eth1"/>

<!-- <mod-shell id="shell-domainname-dummy" name="set NIS/YP domainname" provides="domainname" enable="echo /bin/domainname ${conf_domainname}" disable="" variables="conf_domainname"/> -->

<!-- for testing -->
 <mod-shell id="shell-keyboard-dummy" name="keyboard layout" provides="keyboard" requires="mount/local" enable="echo /bin/loadkeys ${conf_keyboardlayout}" disable=";" variables="conf_keyboardlayout" />

<!-- daemon-spawn-timeout: integer: if a daemon dies within this many seconds,
  it won't be restarted and will will be thought of as being defunct or
  misconfigured -->
 <daemon-spawn-timeout i="20" />
<!-- you can define daemoni like this -->
 <mod-daemon id="daemon-gpm" name="GPM" provides="gpm" requires="tty" command="/usr/sbin/gpm" restart="yes" />
 <mod-daemon id="daemon-apmd" name="APMD" provides="apmd" requires="mount/local" command="/usr/sbin/apmd" restart="yes" />

 <mod-daemon id="daemon-metalog" name="syslogger (metalog)" provides="syslog" requires="mount/local" command="/usr/sbin/metalog" restart="yes" />

 <mod-shell id="shell-net-loopback-dummy" name="net-lo" provides="net-lo:net-lo-dummy" enable="echo /sbin/ifconfig lo up" disable="echo ifconfig lo down" />

<!-- tty initialisation -->
 <tty-manage-utmp b="true" />

 <tty1-regular dev="/dev/tty1" command="/sbin/agetty 38400 tty1" restart="no" TERM="linux" />
 <tty2-regular dev="/dev/tty2" command="/sbin/agetty 38400 tty2" restart="no" TERM="linux" />
 <tty3-regular dev="/dev/tty3" command="/sbin/agetty 38400 tty3" restart="no" TERM="linux" />
 <tty4-regular dev="/dev/tty4" command="/sbin/agetty 38400 tty4" restart="no" TERM="linux" />
 <tty5-regular dev="/dev/tty5" command="/sbin/agetty 38400 tty5" restart="no" TERM="linux" />
 <tty6-regular dev="/dev/tty6" command="/sbin/agetty 38400 tty6" restart="no" TERM="linux" />
 <tty10-regular dev="/dev/tty10" command="/sbin/agetty 38400 tty10" restart="no" TERM="linux" />

<!-- dummy daemon -->
 <mod-daemon id="daemon-dummy" provides="dummyd" command="/bin/sh -c 'while true; do echo -n ${ELEMENT}${TZ}; sleep 1; done'" restart="yes" ELEMENT="."/>

<!-- mount settings -->
<!-- default: <mount-fstab-source s="label:configuration:legacy" /> -->
 <mount-update-steps s="block-devices:metadata" />
 <mount-fstab-source s="label:configuration" />
<!-- the following is safe and faster, but you don't have labels at your disposal, 
 also filesystems won't be checked, so even though it's faster, you maybe shouldn't use it -->
<!--
 <mount-update-steps s="none" />
 <mount-fstab-source s="configuration" />
-->
 <mount-mtab-source s="legacy" />
<!-- using information in /proc is faster than deep-scanning /dev, but i can't get all the devices from
   /proc yet + it only works on linux so far -->
<!-- <mount-block-devices-source s="proc:dev" /> -->
 <mount-block-devices-source s="dev" />
 <mount-filesystem-label-readers s="linux" />
 <mount-ramdisk-fs s="tmpfs" />
 <mount-union s="unionfs" />
 <mount-critical s="/usr:/var" />
 <mount-fsck-command s="/sbin/fsck -a -T -t %s %s" />

<!-- things that should be implemented someday -->
<!-- <mount-block-devices-source s="proc:sys:dev" /> -->
<!-- how to force r/w access on an r/o filesystem -->
 <mount-force-writeable-action s="ram-overlay" />

 <mode id="feedback">
  <enable mod="feedback-visual:dummyd" />
 </mode>
 <mode id="boot">
  <enable mod="sysconf" />
<!--  <enable mod="sysconf:mount/local:hostname:tty:keyboard:ipc:syslog:network:sensors:feedback-aural" /> -->
  <enable-ttys s="tty1-regular" />
 </mode>
 <mode id="default" base="boot">
  <enable mod="ipc:feedback-aural" />
  <disable mod="dummyd" />
  <enable-ttys s="tty2-regular:tty3-regular:tty4-regular:tty5-regular:tty6-regular" />
 </mode>
 <mode id="power-off">
  <disable-unspecified b="yes" />
  <enable-ttys s="none" />
 </mode>
 <mode id="power-reset">
  <disable-unspecified b="yes" />
  <enable-ttys s="none" />
 </mode>
</einit>
